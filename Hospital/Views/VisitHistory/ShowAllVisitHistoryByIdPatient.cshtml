@model VisitsHistoryPatientViewModel
@{ 
    ViewBag.Title = "Карточка пациента";
    int iterNumber = 0;
}

<div class="row p-3">
    <div class="col-lg-9 container">
        <h3 class="text-center">История посещения пациента:  @Model.VisitHistories.Select(p => p.Patient.Surname).FirstOrDefault() @Model.VisitHistories.Select(p => p.Patient.Name).FirstOrDefault()</h3>
        <table class="table table-bordered table-primary table-hover">
            <thead>
                <tr>
                    <th>№</th>
                    <th>
                        <a asp-action="ShowAllVisitHistoryByIdPatient" asp-route-idpatient="@Model.IdPatient" asp-route-sortState="@Model.SortVisitRecords.DateNameSort">Дата</a>
                    </th>
                    <th>
                        <a asp-action="ShowAllVisitHistoryByIdPatient" asp-route-idpatient="@Model.IdPatient" asp-route-sortState="@Model.SortVisitRecords.DoctorNameSort">ФИО врача</a>
                    </th>
                    <th>Диагноз</th>
                    <th>Жалобы</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                @foreach (VisitHistory vh in Model.VisitHistories)
                {
                    <tr>
                        <td>@(++iterNumber)</td>
                        <td>@vh.Date</td>
                        <td>@vh.DoctorList.Surname @vh.DoctorList.Name</td>
                        <td>@vh.DiagnozList.Name</td>
                        <td>@vh.Complaints</td>
                        <td>
                            <form asp-action="Delete" method="get">
                                <a asp-action="EditVisitRecord" class="btn btn-warning" asp-route-id="@vh.Id">Редактировать</a>
                                <input type="hidden" name="id" value="@vh.Id" />
                                <input type="submit" class="btn btn-danger" value="Удалить" />
                            </form>
                        </td>
                    </tr>
                }

            </tbody>
        </table>
        <div class="row p-3">
            <div class="container col-7">
                <a asp-action="AddVisitHistoryById" asp-route-idPatient="@Model.IdPatient" class="btn btn-primary col-3">Добавить посещение</a>
            </div> 
        </div>

        @*внизу Генерация пагинации  *@
        <div page-model="@Model" id-patient="@Model.IdPatient" class="btn-group m-1" page-classes-enabled="true" page-class="btn" page-class-normal="btn-secondary" page-classes-selected="btn-primary" page-action="ShowAllVisitHistoryByIdPatient"></div>
    </div>

</div> 